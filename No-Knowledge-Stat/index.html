<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Persona 5 Skill Tracker</title>
    <link rel="stylesheet" href="p5-style.css" />
    <style>
      #rankup-popup {
        position: absolute;
        display: none;
        z-index: 10000;
        pointer-events: auto;
      }
      #settings-close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: transparent;
        color: white;
        font-size: 1.2rem;
        border: none;
        cursor: pointer;
        z-index: 1001;
      }
      #settings-panel div > strong {
        display: block;
        margin-top: 1rem;
      }
      #settings-panel h2 {
        margin-top: 2rem;
      }
      .note-container {
        pointer-events: auto;
      }
      .note-container img.note {
        pointer-events: auto;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Skill Rank-Up Tracker</h1>

      <!-- Self Care Stat -->
      <div class="skill-card" id="self-care">
        <div class="skill-title">Self Care</div>
        <div class="xp-bar">
          <div class="xp-fill" id="self-care-fill"></div>
        </div>
        <div class="rank-label" id="self-care-rank">Rank</div>
        <button class="add-xp" onclick="openTaskInput('self-care')">
          Add Task
        </button>
        <button class="reset-skill" onclick="resetSkill('self-care')">
          Reset
        </button>
      </div>

      <!-- Entertainment Stat -->
      <div class="skill-card" id="entertainment">
        <div class="skill-title">Entertainment</div>
        <div class="xp-bar">
          <div class="xp-fill" id="entertainment-fill"></div>
        </div>
        <div class="rank-label" id="entertainment-rank">Rank</div>
        <button class="add-xp" onclick="openTaskInput('entertainment')">
          Add Task
        </button>
        <button class="reset-skill" onclick="resetSkill('entertainment')">
          Reset
        </button>
      </div>

      <!-- Socialization Stat -->
      <div class="skill-card" id="socialization">
        <div class="skill-title">Socialization</div>
        <div class="xp-bar">
          <div class="xp-fill" id="socialization-fill"></div>
        </div>
        <div class="rank-label" id="socialization-rank">Rank</div>
        <button class="add-xp" onclick="openTaskInput('socialization')">
          Add Task
        </button>
        <button class="reset-skill" onclick="resetSkill('socialization')">
          Reset
        </button>
      </div>

      <!-- Chores Stat -->
      <div class="skill-card" id="chores">
        <div class="skill-title">Chores</div>
        <div class="xp-bar">
          <div class="xp-fill" id="chores-fill"></div>
        </div>
        <div class="rank-label" id="chores-rank">Rank</div>
        <button class="add-xp" onclick="openTaskInput('chores')">
          Add Task
        </button>
        <button class="reset-skill" onclick="resetSkill('chores')">
          Reset
        </button>
      </div>
    </div>

    <!-- Settings Gear -->
    <button id="settings-button" onclick="openSettings()">⚙</button>

    <!-- Completed Tasks Menu -->
    <button id="completed-tasks-button" onclick="toggleCompletedTasks()">
      📝 Completed Tasks
    </button>
    <div id="completed-tasks-panel" style="display: none">
      <h2>Completed Tasks</h2>
      <ul id="completed-tasks-list"></ul>
    </div>

    <!-- Dynamic Music Notes -->
    <div id="note-container"></div>

    <!-- Rank Up Message -->
    <div id="rankup-popup" onclick="acknowledgeRankUp()"></div>

    <!-- Task Input Overlay -->
    <div id="task-overlay" style="display: none">
      <h3>Add Task</h3>
      <input type="text" id="task-desc" placeholder="Task Description" />
      <input type="number" id="task-xp" placeholder="XP Earned" min="1" />
      <div>
        <button onclick="submitTask()">Submit</button>
        <button onclick="closeTaskInput()">Cancel</button>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
